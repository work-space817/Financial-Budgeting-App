(this["webpackJsonpcar-app"]=this["webpackJsonpcar-app"]||[]).push([[16],{701:function(e,t,a){"use strict";var r=a(3),c=a(8),n=a(4),i=a(256),s=a.n(i),l=a(0),o=a(168),d=a(702),u=a.n(d),b=(a(384),a(9)),j=a.n(b),p=a(64),O=a(65),m=a(1);t.a=function(e){var t=e.onChange,a=e.field,i=e.error,d=e.touched,b=e.value,h=e.aspectRatio,x=void 0===h?16/9:h,g=Object(l.useState)(b),f=Object(n.a)(g,2),v=f[0],y=f[1],C=Object(l.useState)(),N=Object(n.a)(C,2),S=N[0],_=N[1],w=Object(l.useRef)(null),k=Object(l.useRef)(),R=Object(l.useState)(),I=Object(n.a)(R,2),F=I[0],q=I[1],z=Object(l.useState)(!1),B=Object(n.a)(z,2),D=B[0],G=B[1],L=function(){var e=Object(c.a)(Object(r.a)().mark((function e(t){var a,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.target.files[0])){e.next=7;break}return c=URL.createObjectURL(a),e.next=5,y(c);case 5:null===S||void 0===S||S.replace(c),G(!0);case 7:t.target.value="";case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){if(w.current){var e=new s.a(w.current,{aspectRatio:x,viewMode:1,preview:k.current});e.replace(v),_(e)}}),[D,v,x]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{className:u.a.formGroup,children:[Object(m.jsx)("label",{htmlFor:a,style:{height:"100%",width:"100%"},children:Object(m.jsxs)("div",{className:j()(u.a.labelInput,{"text-danger border border-danger rounded":d&&i},{"is-valid border border-success rounded":d&&!i}),children:[F&&Object(m.jsx)("img",{className:u.a.bgImg,src:F,alt:"asdas"}),!F&&Object(m.jsxs)(m.Fragment,{children:[b&&Object(m.jsx)("img",{style:{width:"100%"},src:b,alt:"asdasda"}),!b&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("i",{className:"fa fa-image fa-5x"}),Object(m.jsx)("span",{className:"d-block",children:"\u0414\u043b\u044f \u0432\u0438\u0431\u043e\u0440\u0443 \u0444\u043e\u0442\u043e \u043d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c"})]})]}),i&&Object(m.jsx)("div",{children:i})]})}),Object(m.jsx)("input",{id:a,className:"d-none",type:"file",onChange:L})]}),D&&Object(m.jsx)(o.a,{onClose:function(){G(!1)},children:Object(m.jsxs)("div",{className:u.a.modalBody,children:[Object(m.jsx)("div",{className:u.a.image,children:Object(m.jsx)("img",{ref:w,src:b,alt:"asdds"})}),Object(m.jsx)("div",{ref:k,style:{height:"150px",width:"150px",border:"1px solid silver",overflow:"hidden"}}),Object(m.jsxs)("div",{className:"d-flex justify-content-around mt-2",children:[Object(m.jsx)("button",{onClick:function(){w.current&&(null===S||void 0===S||S.rotate(90))},type:"button",className:"btn btn-outline-secondary",children:Object(m.jsx)(p.a,{icon:O.e,size:"2x"})}),Object(m.jsxs)("div",{className:"d-flex justify-content-between",style:{width:"150px"},children:[Object(m.jsx)("button",{onClick:function(){var e=null===S||void 0===S?void 0:S.getCroppedCanvas().toDataURL();q(e),G(!1),t(a,e)},type:"button",className:"btn btn-outline-success",children:Object(m.jsx)(p.a,{icon:O.a,size:"2x"})}),Object(m.jsx)("button",{onClick:function(){G(!1)},type:"button",className:"btn btn-outline-danger",children:Object(m.jsx)(p.a,{icon:O.f,size:"2x"})})]})]})]})})]})}},702:function(e,t,a){e.exports={modalBody:"CropperComponent_modalBody__2D_CS",image:"CropperComponent_image__2KbH0",formGroup:"CropperComponent_formGroup__31n-Q",labelInput:"CropperComponent_labelInput__3e2Hl",bgImg:"CropperComponent_bgImg__7A-8d"}},829:function(e,t,a){"use strict";a.r(t);var r=a(3),c=a(8),n=a(45),i=a(0),s=a(7),l=a(23),o=a(24),d=a(43),u=a(41),b=a(37),j=b.c({id:b.b().required(),title:b.e().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u043f\u043e\u0432\u0438\u043d\u043d\u0435 \u0431\u0443\u0442\u0438 \u043f\u0443\u0441\u0442\u0438\u043c"),urlSlug:b.e().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u043f\u043e\u0432\u0438\u043d\u043d\u0435 \u0431\u0443\u0442\u0438 \u043f\u0443\u0441\u0442\u0438\u043c"),image:b.a().nullable(),priority:b.e().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u043f\u043e\u0432\u0438\u043d\u043d\u0435 \u0431\u0443\u0442\u0438 \u043f\u0443\u0441\u0442\u0438\u043c")}),p=a(39),O=a(82),m=a(701),h=a(699),x=a(695),g=a(1);t.default=function(){var e=Object(o.a)((function(e){return e.categoryCrud})),t=e.categoryData,a=e.loading,b=Object(l.a)(),f=b.updateCategory,v=b.getCategoryById,y=Object(s.o)().id,C=Number(y);Object(i.useEffect)((function(){v(C)}),[v,C]);var N=Object(s.m)(),S={id:C,title:t.title,urlSlug:t.urlSlug,priority:t.priority,image:t.image},_=function(){var e=Object(c.a)(Object(r.a)().mark((function e(t){var a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(t);case 3:N("/adminPanel/categories"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),a=e.t0,console.log(a);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),w=Object(n.d)({initialValues:S,validationSchema:j,onSubmit:_,enableReinitialize:!0}),k=w.errors,R=w.touched,I=w.handleChange,F=w.handleSubmit,q=w.setFieldValue,z=w.values;return console.log(z),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(p.a,{children:Object(g.jsx)("title",{children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e"})}),a&&Object(g.jsx)(d.a,{}),!a&&Object(g.jsx)(O.a,{title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e",children:Object(g.jsxs)(n.c,{value:w,children:[Object(g.jsx)(n.b,{onSubmit:F,children:Object(g.jsxs)("div",{className:"row d-flex justify-content-around border border-secondary border-3 rounded-4 p-4 m-5",children:[Object(g.jsx)("div",{className:"col-6",children:Object(g.jsx)(m.a,{field:"image",onChange:q,error:k.image,touched:R.image,value:"https://vovalohika.tk/images/300_".concat(z.image,"?t=").concat(Object(x.a)())})}),Object(g.jsxs)("div",{className:"col-6",children:[Object(g.jsx)(u.a,{field:"title",label:"\u041d\u0430\u0437\u0432\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457",error:k.title,touched:R.title,value:z.title,onChange:I}),Object(g.jsx)(u.a,{field:"priority",label:"\u041f\u0440\u0456\u043e\u0440\u0456\u0442\u0435\u0442",error:k.priority,touched:R.priority,value:z.priority,onChange:I}),Object(g.jsx)(u.a,{field:"urlSlug",label:"urlSlug",error:k.urlSlug,onChange:I,touched:R.urlSlug,value:z.urlSlug})]}),Object(g.jsx)("div",{className:"p-d-flex p-jc-center",children:Object(g.jsx)(h.a,{type:"submit",label:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e",icon:"pi pi-plus",disabled:a})})]})}),Object(g.jsx)("div",{className:"col-4"})]})})]})}}}]);
//# sourceMappingURL=16.c5be9441.chunk.js.map